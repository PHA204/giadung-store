    <div class="product-detail-container">
      <!-- Loading State -->
      <div *ngIf="loading" class="loading-state">
        <div class="spinner"></div>
        <p>ƒêang t·∫£i th√¥ng tin s·∫£n ph·∫©m...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !loading" class="error-state">
        <div class="error-icon">‚ùå</div>
        <h2>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</h2>
        <p>{{ error }}</p>
        <button class="btn btn-primary" routerLink="/products">
          ‚Üê Quay l·∫°i danh s√°ch
        </button>
      </div>

      <!-- Product Content -->
      <div *ngIf="product && !loading" class="product-content">
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
          <a routerLink="/">Trang ch·ªß</a>
          <span>/</span>
          <a routerLink="/products">S·∫£n ph·∫©m</a>
          <span>/</span>
          <span class="current">{{ product.productName }}</span>
        </nav>

        <div class="product-layout">
          <!-- Left: Image Gallery -->
          <div class="product-gallery">
            <div class="main-image">
              <img 
                [src]="product.imageUrl || 'https://via.placeholder.com/600'" 
                [alt]="product.productName">
              <div class="image-badges">
                <span class="badge badge-discount" *ngIf="product.discount && product.discount > 0">
                  -{{ product.discount }}%
                </span>
                <span class="badge badge-new" *ngIf="isNewProduct()">
                  M·ªõi
                </span>
              </div>
            </div>
            <!-- Thumbnail gallery (c√≥ th·ªÉ m·ªü r·ªông sau) -->
            <div class="thumbnail-gallery">
              <img [src]="product.imageUrl || 'https://via.placeholder.com/100'" 
                   class="thumbnail active"
                   [alt]="product.productName">
            </div>
          </div>

          <!-- Right: Product Info -->
          <div class="product-info-section">
            <div class="product-header">
              <h1 class="product-title">{{ product.productName }}</h1>
              <div class="product-meta">
                <span class="category-badge">
                  üì¶ {{ product.category?.categoryName }}
                </span>
                <span class="brand-badge">
                  üè∑Ô∏è {{ product.brand?.brandName }}
                </span>
              </div>
            </div>

            <!-- Rating -->
            <div class="rating-section" *ngIf="product.ratingAvg">
              <div class="stars">
                {{ getStarDisplay(product.ratingAvg) }}
              </div>
              <span class="rating-value">{{ product.ratingAvg }}/5</span>
              <span class="review-count">(150 ƒë√°nh gi√°)</span>
            </div>

            <!-- Price -->
            <div class="price-section">
              <div class="price-main">
                <span class="current-price">
                  {{ formatPrice(calculateDiscountedPrice()) }}
                </span>
                <span class="original-price" *ngIf="product.discount && product.discount > 0">
                  {{ formatPrice(product.price) }}
                </span>
              </div>
              <div class="savings" *ngIf="product.discount && product.discount > 0">
                Ti·∫øt ki·ªám: {{ formatPrice(product.price - calculateDiscountedPrice()) }}
              </div>
            </div>

            <!-- Stock Status -->
            <div class="stock-section">
              <div class="stock-status" [class.in-stock]="product.stockQuantity > 0"
                                        [class.low-stock]="product.stockQuantity > 0 && product.stockQuantity <= 10"
                                        [class.out-stock]="product.stockQuantity === 0">
                <span class="icon">
                  {{ product.stockQuantity > 0 ? '‚úì' : '‚úó' }}
                </span>
                <span *ngIf="product.stockQuantity > 10">
                  C√≤n h√†ng ({{ product.stockQuantity }} s·∫£n ph·∫©m)
                </span>
                <span *ngIf="product.stockQuantity > 0 && product.stockQuantity <= 10">
                  S·∫Øp h·∫øt h√†ng (Ch·ªâ c√≤n {{ product.stockQuantity }} s·∫£n ph·∫©m)
                </span>
                <span *ngIf="product.stockQuantity === 0">
                  H·∫øt h√†ng
                </span>
              </div>
            </div>

            <!-- Quantity Selector -->
            <div class="quantity-section" *ngIf="product.stockQuantity > 0">
              <label>S·ªë l∆∞·ª£ng:</label>
              <div class="quantity-controls">
                <button class="btn-quantity" (click)="decreaseQuantity()" [disabled]="quantity <= 1">
                  ‚àí
                </button>
                <input type="number" 
                       [(ngModel)]="quantity" 
                       [min]="1" 
                       [max]="product.stockQuantity"
                       class="quantity-input">
                <button class="btn-quantity" (click)="increaseQuantity()" 
                        [disabled]="quantity >= product.stockQuantity">
                  +
                </button>
              </div>
              <span class="quantity-hint">
                T·ªëi ƒëa: {{ product.stockQuantity }}
              </span>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button class="btn btn-primary btn-add-cart" 
                      (click)="addToCart()"
                      [disabled]="product.stockQuantity === 0 || addingToCart">
                <span *ngIf="!addingToCart">
                  üõí Th√™m v√†o gi·ªè h√†ng
                </span>
                <span *ngIf="addingToCart">
                  <span class="spinner-small"></span> ƒêang th√™m...
                </span>
              </button>
              <button class="btn btn-secondary btn-buy-now"
                      (click)="buyNow()"
                      [disabled]="product.stockQuantity === 0">
                ‚ö° Mua ngay
              </button>
            </div>

            <!-- Features -->
            <div class="features-section">
              <div class="feature-item">
                <span class="feature-icon">üöö</span>
                <div class="feature-text">
                  <strong>Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn</strong>
                  <small>ƒê∆°n h√†ng t·ª´ 500.000ƒë</small>
                </div>
              </div>
              <div class="feature-item">
                <span class="feature-icon">‚Ü©Ô∏è</span>
                <div class="feature-text">
                  <strong>ƒê·ªïi tr·∫£ trong 7 ng√†y</strong>
                  <small>N·∫øu c√≥ l·ªói t·ª´ nh√† s·∫£n xu·∫•t</small>
                </div>
              </div>
              <div class="feature-item">
                <span class="feature-icon">üîí</span>
                <div class="feature-text">
                  <strong>Thanh to√°n b·∫£o m·∫≠t</strong>
                  <small>Nhi·ªÅu h√¨nh th·ª©c thanh to√°n</small>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Product Description -->
        <div class="product-description">
          <div class="tabs">
            <button class="tab-button active">M√¥ t·∫£ s·∫£n ph·∫©m</button>
            <button class="tab-button">Th√¥ng s·ªë k·ªπ thu·∫≠t</button>
            <button class="tab-button">ƒê√°nh gi√° (150)</button>
          </div>
          <div class="tab-content">
            <div class="description-content">
              <h3>M√¥ t·∫£ chi ti·∫øt</h3>
              <p>{{ product.description || 'ƒêang c·∫≠p nh·∫≠t th√¥ng tin chi ti·∫øt s·∫£n ph·∫©m...' }}</p>
            </div>
          </div>
        </div>

        <!-- Related Products -->
        <div class="related-products">
          <h2>S·∫£n ph·∫©m t∆∞∆°ng t·ª±</h2>
          <div class="products-grid">
            <!-- S·∫Ω load t·ª´ API sau -->
            <div class="placeholder-card">
              <p>ƒêang t·∫£i s·∫£n ph·∫©m li√™n quan...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Success Toast -->
      <div *ngIf="showSuccessToast" class="toast-notification success">
        ‚úì ƒê√£ th√™m v√†o gi·ªè h√†ng th√†nh c√¥ng!
      </div>
    </div>