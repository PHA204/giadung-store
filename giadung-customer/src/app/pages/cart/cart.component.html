    <div class="cart-container">
      <div class="cart-header">
        <h1>üõí Gi·ªè h√†ng c·ªßa b·∫°n</h1>
        <p class="item-count">{{ cartItems.length }} s·∫£n ph·∫©m</p>
      </div>

      <!-- Empty Cart -->
      <div *ngIf="cartItems.length === 0" class="empty-cart">
        <div class="empty-icon">üõí</div>
        <h2>Gi·ªè h√†ng tr·ªëng</h2>
        <p>H√£y th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng ƒë·ªÉ ti·∫øp t·ª•c mua s·∫Øm</p>
        <a routerLink="/products" class="btn btn-primary">
          Kh√°m ph√° s·∫£n ph·∫©m
        </a>
      </div>

      <!-- Cart Content -->
      <div *ngIf="cartItems.length > 0" class="cart-content">
        <div class="cart-items">
          <!-- Cart Item -->
          <div *ngFor="let item of cartItems; trackBy: trackByProduct" class="cart-item">
            <div class="item-image">
              <a [routerLink]="['/products', item.product.productId]">
                <img [src]="item.product.imageUrl || 'https://via.placeholder.com/150'" 
                     [alt]="item.product.productName">
              </a>
            </div>

            <div class="item-details">
              <a [routerLink]="['/products', item.product.productId]" class="item-name">
                {{ item.product.productName }}
              </a>
              <div class="item-meta">
                <span class="category">{{ item.product.category?.categoryName }}</span>
                <span class="brand">{{ item.product.brand?.brandName }}</span>
              </div>
              <div class="item-stock" [class.in-stock]="item.product.stockQuantity > 0"
                                      [class.out-stock]="item.product.stockQuantity === 0">
                {{ item.product.stockQuantity > 0 ? 'C√≤n h√†ng' : 'H·∫øt h√†ng' }}
              </div>
            </div>

            <div class="item-price">
              <div class="price-main">
                {{ formatPrice(calculateItemPrice(item)) }}
              </div>
              <div class="price-original" *ngIf="item.product.discount && item.product.discount > 0">
                {{ formatPrice(item.product.price) }}
              </div>
            </div>

            <div class="item-quantity">
              <div class="quantity-controls">
                <button class="btn-quantity" (click)="decreaseQuantity(item)" 
                        [disabled]="item.quantity <= 1">
                  ‚àí
                </button>
                <input type="number" 
                       [(ngModel)]="item.quantity"
                       (ngModelChange)="updateQuantity(item)"
                       [min]="1"
                       [max]="item.product.stockQuantity"
                       class="quantity-input">
                <button class="btn-quantity" (click)="increaseQuantity(item)"
                        [disabled]="item.quantity >= item.product.stockQuantity">
                  +
                </button>
              </div>
            </div>

            <div class="item-total">
              <div class="total-price">
                {{ formatPrice(calculateItemTotal(item)) }}
              </div>
            </div>

            <div class="item-actions">
              <button class="btn-remove" (click)="removeItem(item)" title="X√≥a s·∫£n ph·∫©m">
                üóëÔ∏è
              </button>
            </div>
          </div>
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary">
          <div class="summary-card">
            <h3>T√≥m t·∫Øt ƒë∆°n h√†ng</h3>
            
            <div class="summary-row">
              <span>T·∫°m t√≠nh ({{ getTotalItems() }} s·∫£n ph·∫©m)</span>
              <span>{{ formatPrice(getSubtotal()) }}</span>
            </div>

            <div class="summary-row">
              <span>Gi·∫£m gi√°</span>
              <span class="discount">-{{ formatPrice(getDiscount()) }}</span>
            </div>

            <div class="summary-row shipping">
              <span>Ph√≠ v·∫≠n chuy·ªÉn</span>
              <span *ngIf="getSubtotal() >= 500000" class="free">Mi·ªÖn ph√≠</span>
              <span *ngIf="getSubtotal() < 500000">{{ formatPrice(30000) }}</span>
            </div>

            <div class="summary-divider"></div>

            <div class="summary-row total">
              <span>T·ªïng c·ªông</span>
              <span class="total-amount">{{ formatPrice(getTotal()) }}</span>
            </div>

            <div class="free-shipping-notice" *ngIf="getSubtotal() < 500000">
              <span class="icon">üöö</span>
              <span>Mua th√™m {{ formatPrice(500000 - getSubtotal()) }} ƒë·ªÉ ƒë∆∞·ª£c mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn</span>
            </div>

            <button class="btn btn-primary btn-checkout" (click)="proceedToCheckout()">
              Ti·∫øn h√†nh thanh to√°n
            </button>

            <a routerLink="/products" class="btn btn-secondary">
              ‚Üê Ti·∫øp t·ª•c mua s·∫Øm
            </a>

            <div class="payment-methods">
              <p>Ch·∫•p nh·∫≠n thanh to√°n:</p>
              <div class="methods">
                <img src="https://upload.wikimedia.org/wikipedia/commons/b/b7/MasterCard_Logo.svg" alt="Mastercard" height="24">
                <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Visa.svg" alt="Visa" height="24">
                <span class="method-badge">COD</span>
              </div>
            </div>
          </div>

          <div class="voucher-section">
            <h4>M√£ gi·∫£m gi√°</h4>
            <div class="voucher-input">
              <input type="text" placeholder="Nh·∫≠p m√£ gi·∫£m gi√°" [(ngModel)]="voucherCode">
              <button class="btn-apply" (click)="applyVoucher()">√Åp d·ª•ng</button>
            </div>
            <p *ngIf="voucherError" class="voucher-error">{{ voucherError }}</p>
          </div>
        </div>
      </div>

      <!-- Confirmation Modal -->
      <div *ngIf="showRemoveConfirm" class="modal-overlay" (click)="cancelRemove()">
        <div class="modal-content" (click)="$event.stopPropagation()">
          <h3>X√°c nh·∫≠n x√≥a</h3>
          <p>B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·∫£n ph·∫©m n√†y kh·ªèi gi·ªè h√†ng?</p>
          <div class="modal-actions">
            <button class="btn btn-secondary" (click)="cancelRemove()">H·ªßy</button>
            <button class="btn btn-danger" (click)="confirmRemove()">X√≥a</button>
          </div>
        </div>
      </div>
    </div>
